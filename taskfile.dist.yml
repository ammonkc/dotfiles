# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: 3

includes:
  backup:
    taskfile: ./taskfiles/backup.yml

  brew:
    taskfile: ./taskfiles/brew.yml

  develop:
    aliases: [dev]
    taskfile: ./taskfiles/develop.yml

  linux:
    taskfile: ./taskfiles/linux.yml

  dotfiles:
    aliases: [dot]
    taskfile: ./taskfiles/dotfiles.yml

  mac:
    taskfile: ./taskfiles/mac.yml

  mise:
    taskfile: ./taskfiles/mise.yml

  nvim:
    taskfile: ./taskfiles/nvim.yml

  system:
    taskfile: ./taskfiles/system.yml

tasks:
  default:
    cmd: task -l
    silent: true

  install:
    desc: Complete system setup - installs dependencies, builds utilities, configures dotfiles, and sets up Neovim
    summary: |
      Performs a full system setup by:
      1. Installing all system dependencies (Homebrew and packages)
      2. Installing and configuring all dotfiles (stow packages)
      3. Installing mise-managed tools (after mise config is stowed)
      4. Restoring Neovim plugins to the state specified in lazy-lock.json

      Note: This does NOT apply macOS system preferences.
      Run 'task mac:set:defaults' separately if you want to apply them.
    cmds:
      - task: system:install
      - task: dot:install
      - task: mise:install
      - task: nvim:restore
