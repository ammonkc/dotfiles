#!/usr/bin/env bash
# Generate secure random passwords
# Usage: genpass [length] [--copy]
#        genpass 32
#        genpass 16 --copy

set -e

length="${1:-24}"
copy=false

# Check for --copy flag
for arg in "$@"; do
    [[ "$arg" == "--copy" ]] && copy=true
done

# Generate password using /dev/urandom
password=$(LC_ALL=C tr -dc 'A-Za-z0-9!@#$%^&*()_+-=' < /dev/urandom | head -c "$length")

if [[ "$copy" == true ]] && command -v pbcopy >/dev/null 2>&1; then
    echo -n "$password" | pbcopy
    echo "âœ“ Password copied to clipboard ($length chars)"
else
    echo "$password"
fi

