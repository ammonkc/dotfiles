# Fuzzy-find and kill a process using fzf
# Usage: fkill [signal]
(( $+commands[fzf] )) || { echo "fzf is required"; return 1; }

local signal="${1:--9}"
local pid

if [[ "$UID" != "0" ]]; then
    pid=$(ps -f -u $UID | sed 1d | fzf -m --header="Select process(es) to kill" | awk '{print $2}')
else
    pid=$(ps -ef | sed 1d | fzf -m --header="Select process(es) to kill" | awk '{print $2}')
fi

if [[ -n "$pid" ]]; then
    echo "$pid" | xargs kill "$signal"
fi

